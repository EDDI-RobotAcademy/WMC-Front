{"ast":null,"code":"import axios from 'axios';\nexport default {\n  data() {\n    const token = JSON.parse(localStorage.getItem('userInfo')); //localStorage에 userInfo에 매핑되어있는 token을 가져옴(redis key)\n    axios.post('http://localhost:7777/cart/validate', token).then(res => {\n      if (res.data) {\n        console.log('인증된 사용자 입니다.');\n        const cartKey = `cart_${res.data}`;\n        const cartItems = localStorage.getItem(cartKey) ? JSON.parse(localStorage.getItem(cartKey)) : [];\n      }\n    });\n    return {\n      cartItems: cartItems,\n      selectAll: false,\n      shippingFee: 50\n    };\n  },\n  created() {\n    const token = JSON.parse(localStorage.getItem('userInfo'));\n    axios.post('http://localhost:7777/cart/validate', token).then(res => {\n      if (res.data) {\n        console.log('인증된 사용자 입니다.');\n        const cartKey = `cart_${res.data}`;\n        const cartItems = localStorage.getItem(cartKey) ? JSON.parse(localStorage.getItem(cartKey)) : [];\n        this.cartItems = cartItems;\n      }\n    });\n  },\n  computed: {\n    sum() {\n      return this.cartItems.reduce((acc, item) => acc + (item.selected ? item.quantity * item.price : 0), 0);\n    }\n  },\n  methods: {\n    toggleAllItems() {\n      this.cartItems.forEach(item => item.selected = this.selectAll);\n    },\n    removeSelectedItems() {\n      this.cartItems = this.cartItems.filter(item => !item.selected);\n    }\n  }\n};","map":{"version":3,"names":["axios","data","token","JSON","parse","localStorage","getItem","post","then","res","console","log","cartKey","cartItems","selectAll","shippingFee","created","computed","sum","reduce","acc","item","selected","quantity","price","methods","toggleAllItems","forEach","removeSelectedItems","filter"],"sources":["src/components/order/CartForm.vue"],"sourcesContent":["<template>\n  <div>\n    <h3>Cart</h3>\n    <div class=\"remove-btn\">\n      <v-btn @click=\"removeSelectedItems\">Remove Selected Items</v-btn>\n    </div>\n    <v-simple-table>\n      <template v-slot:default>\n        <thead>\n          <tr>\n            <th>\n              <v-checkbox\n                v-model=\"selectAll\"\n                @change=\"toggleAllItems\"\n              ></v-checkbox>\n            </th>\n            <th>Image</th>\n            <th>Item</th>\n            <th>Quantity</th>\n            <th>Price</th>\n            <th>Subtotal</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(item, index) in cartItems\" :key=\"index\">\n            <td>\n              <v-checkbox v-model=\"item.selected\"></v-checkbox>\n            </td>\n            <td>\n              <v-img\n                :src=\"item.image\"\n                alt=\"Product image\"\n                max-width=\"50\"\n                max-height=\"50\"\n              />\n            </td>\n            <td>{{ item.name }}</td>\n            <td>\n              <v-text-field\n                type=\"number\"\n                min=\"1\"\n                v-model.number=\"item.quantity\"\n                single-line\n                hide-details\n              ></v-text-field>\n            </td>\n            <td>{{ item.price }}</td>\n            <td>{{ item.price * item.quantity }}</td>\n          </tr>\n        </tbody>\n      </template>\n    </v-simple-table>\n    <div class=\"total-info\">\n      <p>Sum: {{ sum }}</p>\n      <p>Shipping fee: {{ shippingFee }}</p>\n      <p>Total: {{ sum + shippingFee }}</p>\n    </div>\n    <v-btn color=\"grey\" class=\"mr-3\">Order All</v-btn>\n    <v-btn color=\"grey\">Order Partly</v-btn>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nexport default {\n  data() {\n    const token = JSON.parse(localStorage.getItem('userInfo')); //localStorage에 userInfo에 매핑되어있는 token을 가져옴(redis key)\n    axios.post('http://localhost:7777/cart/validate', token).then((res) => {\n      if (res.data) {\n        console.log('인증된 사용자 입니다.');\n        const cartKey = `cart_${res.data}`;\n        const cartItems = localStorage.getItem(cartKey)\n          ? JSON.parse(localStorage.getItem(cartKey))\n          : [];\n      }\n    });\n    return {\n      cartItems: cartItems,\n      selectAll: false,\n      shippingFee: 50,\n    };\n  },\n  created() {\n  const token = JSON.parse(localStorage.getItem('userInfo'));\n  axios.post('http://localhost:7777/cart/validate', token).then((res) => {\n    if (res.data) {\n      console.log('인증된 사용자 입니다.');\n      const cartKey = `cart_${res.data}`;\n      const cartItems = localStorage.getItem(cartKey)\n        ? JSON.parse(localStorage.getItem(cartKey))\n        : [];\n      this.cartItems = cartItems;\n    }\n  });\n},\n\n  computed: {\n    sum() {\n      return this.cartItems.reduce(\n        (acc, item) => acc + (item.selected ? item.quantity * item.price : 0),\n        0\n      );\n    },\n  },\n  methods: {\n    toggleAllItems() {\n      this.cartItems.forEach((item) => (item.selected = this.selectAll));\n    },\n    removeSelectedItems() {\n      this.cartItems = this.cartItems.filter((item) => !item.selected);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.total-info {\n  margin-top: 1rem;\n}\n.remove-btn {\n  display: flex;\n  justify-content: flex-end;\n}\n</style>\n"],"mappings":"AA+DA,OAAAA,KAAA;AACA;EACAC,KAAA;IACA,MAAAC,KAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACAN,KAAA,CAAAO,IAAA,wCAAAL,KAAA,EAAAM,IAAA,CAAAC,GAAA;MACA,IAAAA,GAAA,CAAAR,IAAA;QACAS,OAAA,CAAAC,GAAA;QACA,MAAAC,OAAA,WAAAH,GAAA,CAAAR,IAAA;QACA,MAAAY,SAAA,GAAAR,YAAA,CAAAC,OAAA,CAAAM,OAAA,IACAT,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA,CAAAM,OAAA,KACA;MACA;IACA;IACA;MACAC,SAAA,EAAAA,SAAA;MACAC,SAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA,MAAAd,KAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;IACAN,KAAA,CAAAO,IAAA,wCAAAL,KAAA,EAAAM,IAAA,CAAAC,GAAA;MACA,IAAAA,GAAA,CAAAR,IAAA;QACAS,OAAA,CAAAC,GAAA;QACA,MAAAC,OAAA,WAAAH,GAAA,CAAAR,IAAA;QACA,MAAAY,SAAA,GAAAR,YAAA,CAAAC,OAAA,CAAAM,OAAA,IACAT,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA,CAAAM,OAAA,KACA;QACA,KAAAC,SAAA,GAAAA,SAAA;MACA;IACA;EACA;EAEAI,QAAA;IACAC,IAAA;MACA,YAAAL,SAAA,CAAAM,MAAA,CACA,CAAAC,GAAA,EAAAC,IAAA,KAAAD,GAAA,IAAAC,IAAA,CAAAC,QAAA,GAAAD,IAAA,CAAAE,QAAA,GAAAF,IAAA,CAAAG,KAAA,OACA,EACA;IACA;EACA;EACAC,OAAA;IACAC,eAAA;MACA,KAAAb,SAAA,CAAAc,OAAA,CAAAN,IAAA,IAAAA,IAAA,CAAAC,QAAA,QAAAR,SAAA;IACA;IACAc,oBAAA;MACA,KAAAf,SAAA,QAAAA,SAAA,CAAAgB,MAAA,CAAAR,IAAA,KAAAA,IAAA,CAAAC,QAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}