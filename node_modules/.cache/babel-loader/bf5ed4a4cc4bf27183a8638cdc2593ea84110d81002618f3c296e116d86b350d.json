{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Carousel, Slide } from 'vue-carousel';\nimport { mapState } from 'vuex';\nimport axios from 'axios';\nexport default {\n  name: 'MainProductList',\n  components: {\n    Carousel,\n    Slide\n  },\n  props: {\n    products: {\n      type: Array\n    }\n  },\n  data() {\n    return {\n      cart: []\n    };\n  },\n  created() {\n    console.log('products:', this.products);\n  },\n  computed: {\n    ...mapState(['isAuthenticated']),\n    total() {\n      let sum = 0;\n      for (let item of this.cart) {\n        sum += item.price * item.quantity;\n      }\n      return sum;\n    }\n  },\n  mounted() {\n    if (localStorage.getItem('userInfo')) {\n      this.$store.state.isAuthenticated = true;\n    } else {\n      this.$store.state.isAuthenticated = false;\n    }\n  },\n  methods: {\n    addToCart(product, quantity = 1) {\n      if (!this.isAuthenticated) {\n        alert('로그인 먼저 하세용^_^');\n        this.$router.push('/sign-in');\n        return;\n      }\n      const token = JSON.parse(localStorage.getItem('userInfo')); //localStorage에 userInfo에 매핑되어있는 token을 가져옴(redis key)\n      axios.post('http://localhost:7777/cart/validate', token).then(res => {\n        if (res.data) {\n          console.log('인증된 사용자 입니다.');\n          const cartKey = `cart_${res.data}`;\n          let cart = localStorage.getItem(cartKey);\n          if (!cart) {\n            cart = [];\n          } else {\n            cart = JSON.parse(cart);\n          }\n          const existingCartItem = cart.find(item => item.product_id === product.productId);\n          if (existingCartItem) {\n            existingCartItem.quantity += quantity;\n          } else {\n            cart.push({\n              product_id: product.productId,\n              name: product.name,\n              image: product.firstPhoto ? this.getImagePath(product.firstPhoto) : '',\n              price: product.price,\n              quantity: quantity\n            });\n          }\n          localStorage.setItem(cartKey, JSON.stringify(cart));\n          console.log('Cart:', cart);\n          alert(\"장바구니에 추가되었습니다!\");\n        }\n      });\n    },\n    getImagePath(imageData) {\n      console.log('imageData:', imageData);\n      return require(`@/${imageData}`);\n    }\n  }\n};","map":{"version":3,"names":["Carousel","Slide","mapState","axios","name","components","props","products","type","Array","data","cart","created","console","log","computed","total","sum","item","price","quantity","mounted","localStorage","getItem","$store","state","isAuthenticated","methods","addToCart","product","alert","$router","push","token","JSON","parse","post","then","res","cartKey","existingCartItem","find","product_id","productId","image","firstPhoto","getImagePath","setItem","stringify","imageData","require"],"sources":["src/components/product/MainProductList.vue"],"sourcesContent":["<template>\n  <div class=\"main-container\">\n  <!--이슈작성-->\n    <v-row style=\"--bs-gutter-x: 1.5rem;\">\n      <v-col class=\"card-container\"\n        v-for=\"(product, index) in products\"\n        :key=\"product.productId\"\n        cols=\"12\"\n        sm=\"3\"\n        md=\"3\"\n    \n        >\n            <v-card tile flat class=\"p-12 mb-0\">\n                <v-img\n                :src=\"product.firstPhoto ? getImagePath(product.firstPhoto) : ''\"\n                aspect-ratio=\".8\"\n                class=\"grey lighten-3\"\n                ></v-img>\n                \n                <v-card-title>{{ product.name }}</v-card-title>\n                <v-card-actions>      \n              </v-card-actions>\n            </v-card>\n\n      </v-col>\n    </v-row>\n\n</div>\n</template>\n\n<script>\nimport { Carousel, Slide } from 'vue-carousel';\nimport { mapState } from 'vuex';\nimport axios from 'axios';\n\nexport default {\n  name: 'MainProductList',\n  components: {\n    Carousel,\n    Slide,\n  },\n  props: {\n    products: {\n      type: Array,\n    },\n  },\n  data() {\n    return {\n      cart: [],\n    };\n  },\n  created() {\n    console.log('products:', this.products);\n  },\n  computed: {\n    ...mapState(['isAuthenticated']),\n\n    total() {\n      let sum = 0;\n      for (let item of this.cart) {\n        sum += item.price * item.quantity;\n      }\n      return sum;\n    },\n  },\n  mounted() {\n    if (localStorage.getItem('userInfo')) {\n      this.$store.state.isAuthenticated = true;\n    } else {\n      this.$store.state.isAuthenticated = false;\n    }\n  },\n  methods: {\n    addToCart(product, quantity = 1) {\n      if (!this.isAuthenticated) {\n        alert('로그인 먼저 하세용^_^');\n        this.$router.push('/sign-in');\n        return;\n      }\n      const token = JSON.parse(localStorage.getItem('userInfo')); //localStorage에 userInfo에 매핑되어있는 token을 가져옴(redis key)\n      axios.post('http://localhost:7777/cart/validate', token).then((res) => {\n        if (res.data) {\n          console.log('인증된 사용자 입니다.');\n          const cartKey = `cart_${res.data}`;\n          let cart = localStorage.getItem(cartKey);\n\n          if (!cart) {\n            cart = [];\n          } else {\n            cart = JSON.parse(cart);\n          }\n\n          const existingCartItem = cart.find(\n            (item) => item.product_id === product.productId\n          );\n\n          if (existingCartItem) {\n            existingCartItem.quantity += quantity;\n          } else {\n            cart.push({ product_id: product.productId,\n              name: product.name,\n              image: product.firstPhoto ? this.getImagePath(product.firstPhoto) : '',\n              price: product.price,\n              quantity: quantity });\n          }\n\n          localStorage.setItem(cartKey, JSON.stringify(cart));\n          console.log('Cart:', cart);\n          alert(\"장바구니에 추가되었습니다!\")\n        }\n      });\n    },\n    getImagePath(imageData) {\n      console.log('imageData:', imageData);\n      return require(`@/${imageData}`);\n    },\n  },\n};\n</script>\n\n<style>\n.row {\n  --bs-gutter-x:0rem;\n}\n\n.container {\n  max-width: 100%;\n  min-width:0%;\n  padding: 12px;\n  margin:0px;\n}\n\n.main-container {\n  max-width: 100%;\n \n  margin:0;\n}\n\n.card-container{\n  padding-top:0px;\n  padding-bottom:0px;\n}\n\n\n</style>\n"],"mappings":";AA+BA,SAAAA,QAAA,EAAAC,KAAA;AACA,SAAAC,QAAA;AACA,OAAAC,KAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAL,QAAA;IACAC;EACA;EACAK,KAAA;IACAC,QAAA;MACAC,IAAA,EAAAC;IACA;EACA;EACAC,KAAA;IACA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;IACAC,OAAA,CAAAC,GAAA,mBAAAP,QAAA;EACA;EACAQ,QAAA;IACA,GAAAb,QAAA;IAEAc,MAAA;MACA,IAAAC,GAAA;MACA,SAAAC,IAAA,SAAAP,IAAA;QACAM,GAAA,IAAAC,IAAA,CAAAC,KAAA,GAAAD,IAAA,CAAAE,QAAA;MACA;MACA,OAAAH,GAAA;IACA;EACA;EACAI,QAAA;IACA,IAAAC,YAAA,CAAAC,OAAA;MACA,KAAAC,MAAA,CAAAC,KAAA,CAAAC,eAAA;IACA;MACA,KAAAF,MAAA,CAAAC,KAAA,CAAAC,eAAA;IACA;EACA;EACAC,OAAA;IACAC,UAAAC,OAAA,EAAAT,QAAA;MACA,UAAAM,eAAA;QACAI,KAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;QACA;MACA;MACA,MAAAC,KAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAb,YAAA,CAAAC,OAAA;MACApB,KAAA,CAAAiC,IAAA,wCAAAH,KAAA,EAAAI,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAA5B,IAAA;UACAG,OAAA,CAAAC,GAAA;UACA,MAAAyB,OAAA,WAAAD,GAAA,CAAA5B,IAAA;UACA,IAAAC,IAAA,GAAAW,YAAA,CAAAC,OAAA,CAAAgB,OAAA;UAEA,KAAA5B,IAAA;YACAA,IAAA;UACA;YACAA,IAAA,GAAAuB,IAAA,CAAAC,KAAA,CAAAxB,IAAA;UACA;UAEA,MAAA6B,gBAAA,GAAA7B,IAAA,CAAA8B,IAAA,CACAvB,IAAA,IAAAA,IAAA,CAAAwB,UAAA,KAAAb,OAAA,CAAAc,SAAA,CACA;UAEA,IAAAH,gBAAA;YACAA,gBAAA,CAAApB,QAAA,IAAAA,QAAA;UACA;YACAT,IAAA,CAAAqB,IAAA;cAAAU,UAAA,EAAAb,OAAA,CAAAc,SAAA;cACAvC,IAAA,EAAAyB,OAAA,CAAAzB,IAAA;cACAwC,KAAA,EAAAf,OAAA,CAAAgB,UAAA,QAAAC,YAAA,CAAAjB,OAAA,CAAAgB,UAAA;cACA1B,KAAA,EAAAU,OAAA,CAAAV,KAAA;cACAC,QAAA,EAAAA;YAAA;UACA;UAEAE,YAAA,CAAAyB,OAAA,CAAAR,OAAA,EAAAL,IAAA,CAAAc,SAAA,CAAArC,IAAA;UACAE,OAAA,CAAAC,GAAA,UAAAH,IAAA;UACAmB,KAAA;QACA;MACA;IACA;IACAgB,aAAAG,SAAA;MACApC,OAAA,CAAAC,GAAA,eAAAmC,SAAA;MACA,OAAAC,OAAA,MAAAD,SAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}